import "glfw.lx" as glfw

await_close([GLFWwindow] window, [() => i32] fn) => i32
 = glfw.windowShouldClose(window) != 0
 ? 0
 : (fn(), await_close(window, fn))

extern main() => i32 = (
    glfw.init(),
    window = glfw.createWindow(640, 480, "LambdaX GLFW", 0, 0),
    await_close(window, $() => i32 = glfw.pollEvents()),
    glfw.terminate(),
    0
)
